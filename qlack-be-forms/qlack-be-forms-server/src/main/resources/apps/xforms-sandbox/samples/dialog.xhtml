<!--
    Copyright (C) 2006 Orbeon, Inc.

    This program is free software; you can redistribute it and/or modify it under the terms of the
    GNU Lesser General Public License as published by the Free Software Foundation; either version
    2.1 of the License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
    See the GNU Lesser General Public License for more details.

    The full text of the license is available at http://www.gnu.org/copyleft/lesser.html
-->
<xh:html xmlns:xf="http://www.w3.org/2002/xforms"
    xmlns:f="http://orbeon.org/oxf/xml/formatting"
    xmlns:xh="http://www.w3.org/1999/xhtml"
    xmlns:xxf="http://orbeon.org/oxf/xml/xforms"
    xmlns:widget="http://orbeon.org/oxf/xml/widget"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xh:head>
        <xh:title>XForms Dialog</xh:title>
        <xf:model>
            <xf:instance id="instance">
                <instance>
                    <text>Some text here</text>
                    <tmp/>
                    <message/>
                </instance>
            </xf:instance>
        </xf:model>
        <xh:style type="text/css">
            #myDialog_c {
                width:60%;
                height:50%;
                /*Fix for IE6 vertical constraint*/
                _height: expression((YAHOO.util.Dom.getViewportHeight()/2)+"px");
            }
            #myDialog {
                width:100%;
                height:100%;
                border:none;
            }
            #myDialog_h {
                border-width:1px 1px;
                width:97.5%;
            }
            #myDialog .xxforms-dialog-body {
                width: 97.5%;
                height:97.5%;
                overflow:auto;
                border-color:#808080;
                border-style:solid;
                border-width:1px 1px;
                position: absolute;    /*http://www.nabble.com/Re:-autocomplete-fields-within-a-yui-dialog-with-scrollbar-p17405418.html*/
            }
            /* This doesn't work as of 2009-03-26 */
            .xforms-mediatype-text-html { width: 100% }
        </xh:style>

</xh:head>
    <xh:body>

        <!-- The dialog -->
        <xxf:dialog id="myDialog" level="modeless" close="true" draggable="true" appearance="full">

            <xf:setvalue ev:event="xxforms-dialog-open" ref="tmp" value="context()/text"/>

            <xf:label>Dialog title</xf:label>
            <xh:h3>Please complete the form</xh:h3>
            <xh:p>
                <xf:group>
                    <xxf:hide ev:event="DOMActivate" dialog="myDialog"/>
                    <xf:trigger>
                        <xf:label>Update</xf:label>
                        <xf:setvalue ref="text" value="context()/tmp" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger>
                        <xf:label>Undo</xf:label>
                    </xf:trigger>
                </xf:group>
            </xh:p>
            <xf:textarea ref="tmp" mediatype="text/html"/>
            <xh:p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut pretium, nisi non lobortis semper, elit
                lacus lacinia arcu, sit amet elementum risus nisi a velit. In pellentesque tempus mi. Cras consectetur
                sagittis lorem. Fusce sed sem. Morbi tristique. Vestibulum commodo porttitor quam. Sed malesuada risus
                at risus. Sed egestas, velit eget imperdiet sollicitudin, neque quam molestie lectus, vitae venenatis
                justo nisl vel sapien. Nam gravida aliquam tellus. Proin cursus risus mattis lacus. Nunc vehicula nulla
                in pede. Suspendisse eu urna a nisl luctus malesuada. Nam vitae odio non mi ultrices sollicitudin. Donec
                blandit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.
                Aliquam blandit placerat neque. Praesent feugiat eros vitae ante. Ut vitae neque in ipsum varius
                bibendum. Morbi adipiscing malesuada nulla.
            </xh:p>
            <xh:p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut pretium, nisi non lobortis semper, elit
                lacus lacinia arcu, sit amet elementum risus nisi a velit. In pellentesque tempus mi. Cras consectetur
                sagittis lorem. Fusce sed sem. Morbi tristique. Vestibulum commodo porttitor quam. Sed malesuada risus
                at risus. Sed egestas, velit eget imperdiet sollicitudin, neque quam molestie lectus, vitae venenatis
                justo nisl vel sapien. Nam gravida aliquam tellus. Proin cursus risus mattis lacus. Nunc vehicula nulla
                in pede. Suspendisse eu urna a nisl luctus malesuada. Nam vitae odio non mi ultrices sollicitudin. Donec
                blandit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.
                Aliquam blandit placerat neque. Praesent feugiat eros vitae ante. Ut vitae neque in ipsum varius
                bibendum. Morbi adipiscing malesuada nulla.
            </xh:p>
            <xh:p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut pretium, nisi non lobortis semper, elit
                lacus lacinia arcu, sit amet elementum risus nisi a velit. In pellentesque tempus mi. Cras consectetur
                sagittis lorem. Fusce sed sem. Morbi tristique. Vestibulum commodo porttitor quam. Sed malesuada risus
                at risus. Sed egestas, velit eget imperdiet sollicitudin, neque quam molestie lectus, vitae venenatis
                justo nisl vel sapien. Nam gravida aliquam tellus. Proin cursus risus mattis lacus. Nunc vehicula nulla
                in pede. Suspendisse eu urna a nisl luctus malesuada. Nam vitae odio non mi ultrices sollicitudin. Donec
                blandit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.
                Aliquam blandit placerat neque. Praesent feugiat eros vitae ante. Ut vitae neque in ipsum varius
                bibendum. Morbi adipiscing malesuada nulla.
            </xh:p>
            <xh:p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut pretium, nisi non lobortis semper, elit
                lacus lacinia arcu, sit amet elementum risus nisi a velit. In pellentesque tempus mi. Cras consectetur
                sagittis lorem. Fusce sed sem. Morbi tristique. Vestibulum commodo porttitor quam. Sed malesuada risus
                at risus. Sed egestas, velit eget imperdiet sollicitudin, neque quam molestie lectus, vitae venenatis
                justo nisl vel sapien. Nam gravida aliquam tellus. Proin cursus risus mattis lacus. Nunc vehicula nulla
                in pede. Suspendisse eu urna a nisl luctus malesuada. Nam vitae odio non mi ultrices sollicitudin. Donec
                blandit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.
                Aliquam blandit placerat neque. Praesent feugiat eros vitae ante. Ut vitae neque in ipsum varius
                bibendum. Morbi adipiscing malesuada nulla.
            </xh:p>
            <xh:p>
                <xf:trigger>
                    <xf:label>Hide dialog</xf:label>
                    <xxf:hide dialog="myDialog" ev:event="DOMActivate"/>
                </xf:trigger>
            </xh:p>
        </xxf:dialog>

        <!-- Button to show the dialog -->
        <xf:trigger id="show-dialog-center">
            <xf:label>Show dialog (default)</xf:label>
            <xxf:show ev:event="DOMActivate" dialog="myDialog"/>
        </xf:trigger>
        <xf:trigger id="show-dialog-below-output-trigger">
            <xf:label>Show dialog below output</xf:label>
            <xxf:show ev:event="DOMActivate" dialog="myDialog" neighbor="message-output"/>
        </xf:trigger>
        <xf:trigger id="show-dialog-below-trigger-trigger">
            <xf:label>Show dialog below trigger</xf:label>
            <xxf:show ev:event="DOMActivate" dialog="myDialog" neighbor="show-dialog-below-trigger-trigger"/>
        </xf:trigger>
        <!-- Displays value entered in the dialog -->
        <xh:p>
            <xf:output ref="text">
                <xf:label>Text:</xf:label>
            </xf:output>
        </xh:p>
        <xh:p>
            <xf:output ref="message" id="message-output">
                <xf:label>Message:</xf:label>
            </xf:output>
        </xh:p>

    </xh:body>
</xh:html>
